
{% load staticfiles %}
		<div id="contenido_principal" class="container-fluid">
			<div class="row">
				<div class="col-sm-3 col-md-2 sidebar">
					<ul class="nav nav-sidebar">
						<li><a href="/caja">Caja</a></li>
						<li ><a href="/clientes">Clientes<span class="sr-only">(current)</span></a></li>
						<li class="active"><a href="/mascotas">Mascotas</a></li>
					</ul>
					<ul class="nav nav-sidebar">
						<li><a href="">Atención Clínica</a></li>
						<li><a href="">Hospital</a></li>
						<li><a href="">Peluquería</a></li>
						<li><a href="">Hotel</a></li>
					</ul>
					<ul class="nav nav-sidebar">
						<li><a href="">Inventario</a></li>
						<li><a href="">Calendario</a></li>
						<li><a href="">Horario</a></li>
						<li><a href="">Finanzas</a></li>
					</ul>
				</div>
				<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
					<div class="col-xs-12 col-sm-12" style="float=left"><h1 class="">Mascotas</h1> <hr/></div>
						<h2 class="sub-header">
							<img src="{% static "dist/fonts/buscador.png"%}" class="img-responsive center-block" style="height:30px; float:left">
							&nbsp;Buscar Mascota
						</h2>
					<div class="col-xs-12 col-sm-12">
						<div class="table-responsive">
							<table id ="tabla_mascotas" class="display table table-striped">
								<thead>
									<tr>
										<th style="width:20px">Id</th>
										<th style="width:30px">Suscrito</th>
										<th>Nombre</th>
										<th>Propietario</th>
										<th>Especie</th>
										<th>Raza</th>
										<th>Edad</th>
										<th>Última Atención</th>
										<th>Acciones</th>
									</tr>
								</thead>
								<tbody><!--TODO: cambiar cliente por mascota en la tabla!-->
									{% for mascota in mascotas %}
										<tr>
											<td ><a href="/mascotas/info_mascota?id={{ mascota.id }}"> {{ mascota.id }}</a></td>
											<td  id="tdmascota{{mascota.id}}">
											{% if mascota.suscrito != False %}
												<img src="{% static "dist/fonts/goldpaw.png"%}" class="img-responsive center-block" style="height:20px">
											{% endif %}
											</td>
											<td><a href="/mascotas/info_mascota?id={{ mascota.id }}"> {{ mascota.nombre }} </a></td>
											<td><a href="/clientes/info_cliente?id={{ mascota.cliente.id }}"> {{ mascota.cliente }}</a></td>
											<td>{{ mascota.especie }}</td>
											<td>{{ mascota.raza }}</td>
											<td>{{ mascota.obtener_edad }}</td>
											<td>{{ mascota.obtener_ultima_at }}</td>
											<td style="display: inline-flex;">
											{% if mascota.suscrito == False %}
												 <a href="" data-toggle="modal" data-target="#myModal" data-whatever="{{mascota.nombre}}" data-mascotaid ="{{mascota.id}}"><img src="{% static "dist/fonts/goldpaw.png"%}"  id="imsuscrito{{mascota.id}}" class="img-responsive center-block" style="height:28px" title="Suscribir mascota"></a> &nbsp;
											{% else %}
												<span style"height:28px;width:28px"></span>
											{% endif %}
											<a href="" data-toggle="modal" data-target="#myModal2" data-whatever="{{mascota.nombre}}" id="imatencion{{mascota.id}}" data-mascotaid ="{{mascota.id}}"><img src="{% static "dist/fonts/vacuna.png"%}" class="img-responsive center-block" style="height:30px" title="Atención Clínica"> </a> &nbsp;
											<a href="" data-toggle="modal" data-target="#myModal3" data-whatever="{{mascota.nombre}}" id="imatencion{{mascota.id}}" data-mascotaid ="{{mascota.id}}"><img src="{% static "dist/fonts/hospital.png"%}" class="img-responsive center-block" style="height:30px" title="Hospital"> </a> &nbsp;
											<a href="" data-toggle="modal" data-target="#myModal4" data-whatever="{{mascota.nombre}}" id="imatencion{{mascota.id}}" data-mascotaid ="{{mascota.id}}"><img src="{% static "dist/fonts/peluqueria.png"%}" class="img-responsive center-block" style="height:30px" title="Peluquería"> </a> &nbsp;
											<a href="" data-toggle="modal" data-target="#myModal5" data-whatever="{{mascota.nombre}}" id="imatencion{{mascota.id}}" data-mascotaid ="{{mascota.id}}"><img src="{% static "dist/fonts/hotel_azul.png"%}" class="img-responsive center-block" style="height:30px" title="Hotel"> </a> &nbsp;
											<a href="/mascotas/info_mascota?id={{ mascota.id }}#eventos"><img src="{% static "dist/fonts/calendar.png"%}" class="img-responsive center-block" style="height:30px" title="Ver Calendario"></a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div> 
				</div>
			</div>
		</div>
		<!-- Modal 1-->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog modal-admin" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel"  style="text-align:center">
				</h4>
			  </div>
			  <div class="modal-body">
				Esto generará un pago de suscripción que se podrá cancelar en la sección caja.
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
				<button type="button" id="suscribir" class="btn btn-warning">Suscribir Mascota</button>
			  </div>
			</div>
		  </div>
		</div>
		<!-- Modal 2-->
		<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog modal-admin" role="document">
			<div class="modal-content">
			  <div class="modal-header" >
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" style="text-align:center" id="myModal2Label">
				</h4>
			  </div>
			  <form id="ingresarConsulta" method="POST">
				  {% csrf_token %}
				  <div class="modal-body">
					Esto generará un pago de atención clínica que se podrá cancelar en la sección caja. &nbsp;
					Por favor ingrese monto a pagar y veterinario que realizará la atención. 
					<br/><br/>
					  <table>
						{{ consulta_form.as_table }}
					  </table>
				  </div>
				  <div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-primary">Ingresar</button>
				  </div>
			  </form>
			</div>
		  </div>
		</div>
				<!-- Modal 3-->
		<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog modal-admin" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title"  style="text-align:center" id="myModal3Label">
				</h4>
			  </div>
			  <form id="ingresarHospital" method="POST">
				{% csrf_token %}
				<div class="modal-body">
					Esto generará un pago de hospitalización que se podrá cancelar en la sección caja. &nbsp;
					Además en la sección Hospital el veterinario podrá ingresar   
				<br/><br/>
				<table>
					{{ hospital_form.as_table }}
				</table>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-primary">Ingresar</button>
				</div>
			  </form>
			</div>
		  </div>
		</div>
				<!-- Modal 4-->
		<div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog modal-admin" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModal4Label"  style="text-align:center">
				</h4>
			  </div>
			<form id="ingresarHospital" method="POST">
				{% csrf_token %}

			  <div class="modal-body">
				<div id="preguntaPelu" class="row">
					<div id="reservarPelu" class="col-md-2 col-md-offset-2">
						<button type="button" class="btn btn btn-info">Reservar hora</button>
					</div>
					<div id="ingPelu" class="col-md-2 col-md-offset-2">
						<button type="button" class="btn btn-success">Ingresar</button>
					</div>
				</div>
				<div id="texto_pelu" style="display:none">
					<span class="texto_modal"  >
						Esto generará un pago de peluquería que se podrá cancelar en la sección caja.
					</span>
					<br/><br/>
					<table>
						{{ pelu_form.as_table }}
					</table>
				</div>
				<div id="texto_reserva" style="display:none">
					<span class="texto_modal" >
						Ingrese la ..... Esto generará una reserva de hora.
					</span>
					<table>
						{{ pelu_form.as_table }}
					</table>
				</div>
			  </div>
			  <div class="modal-footer">
				<div id="botonFinPelu">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button type="submit" id="ingresarPelu" class="btn btn-success">Ingresar</button>
				</div>
				<div id="botonFinReserva">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button type="submit" id="ingresarReserva" class="btn btn-primary">Reservar</button>
				</div>
			  </div>
			  </form>
			</div>
		  </div>
		</div>
				<!-- Modal 5-->
		<div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModal5Label"  style="text-align:center">
				</h4>
			  </div>
			  <div class="modal-body">
				Esto generará un pago de hotelería que se podrá cancelar en la sección caja.
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
				<button type="button" id="ingresarHotel" class="btn btn-primary">Ingresar</button>
			  </div>
			</div>
		  </div>
		</div>
		 <!-- Bootstrap core JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="{% static "dist/js/jquery-1.11.3.min.js" %}"></script>
		<script src="{% static "dist/js/bootstrap.min.js" %}"></script>

		<script src="{% static "dist/js/jquery.dataTables.min.js" %}"></script>
		<script type="text/javascript" src="{% static "dist/js/modales.js" %}">	</script>
		<script type="text/javascript">
			$(document).ready(function(){
				$('#reservarPelu').on('click', function(event) {        
					 $('#preguntaPelu').hide();
					 $('#myModal4Label').text('Reservar hora de Peluquería')
					 $('#texto_reserva').show();
					 $('#botonFinReserva').show();

				});
				$('#ingPelu').on('click', function(event) {        
					 $('#preguntaPelu').hide();
					 $('#myModal4Label').text('Ingresar a Peluquería')
					 $('#texto_pelu').show();
					 $('#botonFinPelu').show();
				});
			});
			$(document).ready(function() {

					$('#tabla_mascotas').DataTable( {
							autoWidth: false,
							columns: [
								{"width": "5%"},
								{"width": "5%"},
								{"width": "8%"},
								{"width": "15%"},
								{"width": "10%"},
								{"width": "8%"},
								{"width": "10%"},
								{"width": "10%"},
								{"width": "20%"}
							],
							language: 
							{
								"sProcessing":     "Procesando...",
								"sLengthMenu":     "Mostrar _MENU_ registros",
								"sZeroRecords":    "No se encontraron resultados",
								"sEmptyTable":     "Ningún dato disponible en esta tabla",
								"sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
								"sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
								"sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
								"sInfoPostFix":    "",
								"sSearch":         "Buscar:",
								"sUrl":            "",
								"sInfoThousands":  ",",
								"sLoadingRecords": "Cargando...",
								"oPaginate": {
									"sFirst":    "Primero",
									"sLast":     "Último",
									"sNext":     "Siguiente",
									"sPrevious": "Anterior"
								},
								"oAria": {
									"sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
									"sSortDescending": ": Activar para ordenar la columna de manera descendente"
								}
							}
					} );
			} );
		</script>